const socket = io(), usernameInput = document.querySelector("#username"), error = document.querySelector(".error"); function handleForm(e) { e.preventDefault(); var r = usernameInput.value.toLowerCase(); if (r.length < 1) return error.innerHTML = "Username is needed!", error.style.display = "block"; -1 !== r.indexOf("_") ? axios.post("/verify", { username: r, socketId: socket.id }).then(e => { let r = e.data; if ("string" == typeof r) return error.style.display = "block", error.innerHTML = r, console.log(r); usernameInput.value = "", socket.emit("USER_CONNECTED", r.user), localStorage.setItem("name", r.user.name), window.location = "/chat" }).catch(e => console.log(e)) : (error.style.display = "block", error.innerHTML = "Enter username in [name_surname] formart!") } error.style.display = "none";